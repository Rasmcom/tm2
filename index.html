<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ملف شواهد الأداء الوظيفي للمعلم</title>
    <link rel="preconnect" href="https://fonts.googleapis.com ">
    <link rel="preconnect" href="https://fonts.gstatic.com " crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href=" https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css ">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Cairo', sans-serif;
        }
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        /* Sidebar and Layout */
        .sidebar {
            position: fixed;
            top: 0;
            right: -300px;
            width: 300px;
            height: 100%;
            background-color: #2F3246;
            color: white;
            z-index: 1000;
            transition: right 0.3s ease;
            overflow-y: auto;
        }
        .sidebar.active {
            right: 0;
        }
        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid #444;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .close-sidebar {
            font-size: 24px;
            cursor: pointer;
        }
        .sidebar-menu {
            padding: 20px 0;
        }
        .menu-item {
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .menu-item:hover {
            background-color: #3a3d50;
        }
        .menu-item i {
            width: 20px;
        }
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 999;
        }
        .main-content {
            transition: margin-right 0.3s ease;
        }
        .menu-toggle {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            margin-left: 10px;
        }
        /* Header Styles */
        header {
            background-color: #2F3246;
            padding: 15px 0;
            position: relative;
        }
        .header-gradient {
            height: 4px;
            background: linear-gradient(to left, #4CAF50, #2196F3);
            margin-top: 15px;
        }
        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .header-left-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .logo-title {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .logo img {
            height: 60px;
            width: auto;
        }
        .site-title {
            color: white;
            font-size: 20px;
            font-weight: 700;
            display: inline;
            line-height: 1.4;
        }
        .site-title i {
            font-size: 24px;
        }
        .update-btn {
            background: linear-gradient(to left, #4CAF50, #2196F3);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .update-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        .teacher-info {
            color: white;
            text-align: left;
            font-size: 14px;
        }
        /* Tabs Navigation */
        .tabs {
            display: flex;
            flex-wrap: wrap;
            background-color: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .tab-link {
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            text-align: center;
            flex: 1;
            min-width: 120px;
            border-bottom: 3px solid transparent;
        }
        .tab-link:hover {
            background-color: #f1f1f1;
        }
        .tab-link.active {
            border-bottom: 3px solid #2196F3;
            color: #2196F3;
        }
        /* Tab Content */
        .tab-content {
            display: none;
            padding: 30px 0;
            animation: fadeIn 0.5s ease;
        }
        .tab-content.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        .form-control {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        .btn {
            background-color: #2196F3;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .btn:hover {
            background-color: #0b7dda;
        }
        /* Cards */
        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
        }
        .card-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 15px;
            color: #2196F3;
            border-bottom: 2px solid #f1f1f1;
            padding-bottom: 10px;
        }
        /* Leaders Section */
        .leaders-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            padding: 20px 0;
        }
        .leader-card {
            width: 320px;
            text-align: center;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border: 1px solid #eee;
        }
        .leader-card:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .leader-img {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            margin: 0 auto 15px;
            border: 6px solid transparent;
            background-image: linear-gradient(white, white), 
                              linear-gradient(to right, #4CAF50, #2196F3);
            background-origin: border-box;
            background-clip: content-box, border-box;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
        }
        .leader-name {
            font-weight: 700;
            font-size: 16px;
            margin-bottom: 15px;
            color: #2F3246;
            position: relative;
            padding-bottom: 10px;
        }
        .leader-name::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 2px;
            background-color: #2196F3;
        }
        .leader-quote {
            color: #333;
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
            line-height: 1.6;
            font-size: 14px;
            border: 1px solid #eee;
            text-align: justify;
        }
        /* CV Section */
        .certificates-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .certificate-item {
            position: relative;
            height: 150px;
            border: 1px dashed #ccc;
            border-radius: 8px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            background-color: #f9f9f9;
        }
        .certificate-item:hover {
            border-color: #2196F3;
            background-color: #f0f8ff;
        }
        .certificate-item img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 6px;
        }
        .certificate-item .upload-icon {
            font-size: 30px;
            color: #999;
            text-align: center;
            padding: 10px;
        }
        .certificate-item .upload-icon i {
            font-size: 36px;
            margin-bottom: 10px;
            color: #2196F3;
        }
        .certificate-item input[type="file"] {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }
        .certificate-item.uploading {
            border-color: #2196F3;
            background-color: #e3f2fd;
        }
        .training-courses {
            margin-top: 20px;
        }
        .course-item {
            display: flex;
            margin-bottom: 10px;
            background-color: #f9f9f9;
            padding: 10px;
            border-radius: 5px;
            align-items: center;
            transition: all 0.3s ease;
            border: 1px solid #eee;
            flex-wrap: wrap;
            gap: 10px;
        }
        .course-item:hover {
            background-color: #f0f8ff;
            border-color: #2196F3;
        }
        .course-item input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: 'Cairo', sans-serif;
        }
        .course-item .course-name {
            flex: 2;
            min-width: 200px;
        }
        .course-item .course-date {
            flex: 1;
            min-width: 150px;
        }
        .course-item .course-hours {
            flex: 0.5;
            min-width: 100px;
        }
        .course-item button {
            background-color: #f44336;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 8px 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .course-item button:hover {
            background-color: #d32f2f;
            transform: scale(1.05);
        }
        .add-course-btn {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.3s ease;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            width: fit-content;
        }
        .add-course-btn:hover {
            background-color: #388e3c;
            transform: translateY(-2px);
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
        }
        .add-course-btn i {
            font-size: 14px;
        }
        /* Introduction page styles */
        .intro-content {
            padding: 10px 0;
            line-height: 1.8;
        }
        .intro-content p {
            margin-bottom: 15px;
            text-align: justify;
            font-size: 16px;
        }
        .values-list {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }
        .values-list li {
            margin-bottom: 10px;
            padding: 8px 15px;
            background-color: #f9f9f9;
            border-radius: 5px;
            border-right: 3px solid #2196F3;
        }
        .edit-btn {
            background-color: #f1f1f1;
            border: 1px solid #ddd;
            color: #555;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin-top: 10px;
            transition: all 0.3s ease;
        }
        .edit-btn:hover {
            background-color: #e0e0e0;
        }
        .btn-secondary {
            background-color: #f1f1f1;
            color: #333;
            margin-right: 10px;
        }
        /* Performance Indicators */
        .performance-item {
            margin-bottom: 30px;
            border-radius: 8px;
            padding: 20px;
        }
        .performance-item:nth-child(1) { background-color: #e3f2fd; }
        .performance-item:nth-child(2) { background-color: #e8f5e9; }
        .performance-item:nth-child(3) { background-color: #fff3e0; }
        .performance-item:nth-child(4) { background-color: #f3e5f5; }
        .performance-item:nth-child(5) { background-color: #e0f7fa; }
        .performance-item:nth-child(6) { background-color: #f1f8e9; }
        .performance-item:nth-child(7) { background-color: #fff8e1; }
        .performance-item:nth-child(8) { background-color: #fce4ec; }
        .performance-item:nth-child(9) { background-color: #e8eaf6; }
        .performance-item:nth-child(10) { background-color: #e0f2f1; }
        .performance-item:nth-child(11) { background-color: #fffde7; }
        .performance-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .performance-title {
            font-weight: 700;
            font-size: 18px;
        }
        .performance-weight {
            background-color: #2196F3;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 14px;
        }
        .performance-description {
            margin-bottom: 15px;
            color: #555;
        }
        .evidence-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }
        .evidence-item {
            position: relative;
            height: 120px;
            border: 1px dashed #ccc;
            border-radius: 8px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            background-color: rgba(255, 255, 255, 0.7);
        }
        .evidence-item:hover {
            border-color: #2196F3;
            background-color: rgba(255, 255, 255, 0.9);
            transform: translateY(-2px);
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
        }
        .evidence-item img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 6px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .evidence-item .upload-icon {
            font-size: 24px;
            color: #777;
            text-align: center;
            padding: 10px;
        }
        .evidence-item .upload-icon i {
            font-size: 28px;
            margin-bottom: 8px;
            color: #2196F3;
        }
        .evidence-item .upload-icon p {
            margin: 0;
            font-size: 14px;
        }
        .evidence-item input[type="file"] {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }
        .evidence-item.uploading {
            border-color: #2196F3;
            background-color: rgba(33, 150, 243, 0.1);
        }
        .note-container {
            margin-bottom: 15px;
        }
        .note-container textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            resize: vertical;
            min-height: 80px;
            font-family: 'Cairo', sans-serif;
        }
        .rating-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .rating-label {
            min-width: 80px;
        }
        .rating-slider {
            flex: 1;
        }
        .rating-value {
            min-width: 30px;
            text-align: center;
            font-weight: 700;
        }
        .performance-result {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-top: 30px;
            text-align: center;
        }
        .result-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 15px;
            color: #2196F3;
        }
        .result-score {
            font-size: 36px;
            font-weight: 700;
            color: #4CAF50;
            margin-bottom: 10px;
        }
        .result-description {
            color: #555;
        }
        /* Follow-up Section */
        .follow-up-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        @media (max-width: 768px) {
            .follow-up-container {
                grid-template-columns: 1fr;
            }
        }
        /* Improvement Plan */
        .improvement-form {
            margin-bottom: 20px;
        }
        .improvement-items {
            margin-top: 20px;
        }
        .improvement-item {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        .improvement-item-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        .improvement-area {
            font-weight: 700;
        }
        .improvement-priority {
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 12px;
            color: white;
        }
        .priority-high {
            background-color: #f44336;
        }
        .priority-medium {
            background-color: #FFC107;
        }
        .priority-low {
            background-color: #4CAF50;
        }
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1000;
            overflow: auto;
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: white;
            border-radius: 8px;
            max-width: 500px;
            width: 90%;
            padding: 20px;
            position: relative;
            animation: modalFadeIn 0.3s ease;
        }
        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .close-modal {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 24px;
            cursor: pointer;
            color: #777;
        }
        .modal-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            color: #2196F3;
            text-align: center;
        }
        /* Image Preview Modal */
        .preview-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            z-index: 1000;
            overflow: auto;
            justify-content: center;
            align-items: center;
        }
        .preview-content {
            max-width: 90%;
            max-height: 90%;
            position: relative;
        }
        .preview-content img {
            max-width: 100%;
            max-height: 90vh;
            border: 5px solid white;
            border-radius: 5px;
        }
        .preview-content iframe {
            width: 90vw;
            height: 90vh;
            border: none;
        }
        .close-preview {
            position: absolute;
            top: -40px;
            right: 0;
            font-size: 30px;
            color: white;
            cursor: pointer;
        }
        /* Footer */
        footer {
            background-color: #444;
            color: white;
            padding: 20px 0;
            text-align: center;
            margin-top: 50px;
        }
        .footer-content {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
        }
        .footer-logo img {
            height: 40px;
        }
        .footer-text a {
            color: white;
            text-decoration: none;
        }
        .footer-text a:hover {
            text-decoration: underline;
        }
        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #4CAF50;
            color: white;
            padding: 15px 25px;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 1000;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.5s ease;
        }
        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h3>ملف شواهد الأداء</h3>
            <span class="close-sidebar" id="closeSidebar">&times;</span>
        </div>
        <ul class="sidebar-menu">
            <li><a href="#" class="tab-link active" data-tab="home"><span class="menu-icon"><i class="fas fa-home"></i></span>الرئيسية</a></li>
            <li><a href="#" class="tab-link" data-tab="introduction"><span class="menu-icon"><i class="fas fa-info-circle"></i></span>مقدمة الملف</a></li>
            <li><a href="#" class="tab-link" data-tab="leaders"><span class="menu-icon"><i class="fas fa-user-tie"></i></span>كلمات القادة</a></li>
            <li><a href="#" class="tab-link" data-tab="cv"><span class="menu-icon"><i class="fas fa-id-card"></i></span>السيرة الذاتية</a></li>
            <li><a href="#" class="tab-link" data-tab="performance"><span class="menu-icon"><i class="fas fa-chart-line"></i></span>شواهد الأداء</a></li>
            <li><a href="#" class="tab-link" data-tab="followup"><span class="menu-icon"><i class="fas fa-clipboard-check"></i></span>التوثيق والمتابعة</a></li>
            <li><a href="#" class="tab-link" data-tab="improvement"><span class="menu-icon"><i class="fas fa-lightbulb"></i></span>خطة التحسين</a></li>
        </ul>
    </div>
    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>
    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <!-- Header -->
        <header>
            <div class="container">
                <div class="header-content">
                    <div class="header-left-section">
                        <button class="menu-toggle" id="menuToggle"><i class="fas fa-bars"></i></button>
                        <div class="logo-title">
                            <div class="logo">
                                <img src="https://salogos.org/wp-content/uploads/2021/11/UntiTtled-1-1300x988.png " alt="شعار وزارة التعليم">
                            </div>
                            <h1 class="site-title">ملف شواهد الأداء الوظيفي للمعلم<span id="headerTeacherName"></span></h1>
                        </div>
                    </div>
                    <button class="update-btn" id="updateDataBtn">
                        <i class="fas fa-sync-alt"></i>
                        تحديث البيانات الأساسية
                    </button>
                    <div class="teacher-info" id="teacherInfoHeader"><!-- Teacher info will be displayed here --></div>
                </div>
            </div>
            <div class="header-gradient"></div>
        </header>
        <!-- Navigation Tabs -->
        <div class="tabs">
            <div class="tab-link active" data-tab="home">الرئيسية</div>
            <div class="tab-link" data-tab="introduction">مقدمة الملف</div>
            <div class="tab-link" data-tab="leaders">كلمات القادة</div>
            <div class="tab-link" data-tab="cv">السيرة الذاتية</div>
            <div class="tab-link" data-tab="performance">شواهد الأداء</div>
            <div class="tab-link" data-tab="followup">التوثيق والمتابعة</div>
            <div class="tab-link" data-tab="improvement">خطة التحسين</div>
        </div>
        <div class="container">
            <!-- Home Tab -->
            <div class="tab-content active" id="home">
                <div class="card">
                    <h2 class="card-title">البيانات الأساسية</h2>
                    <div class="form-group">
                        <label for="teacherName">اسم المعلم</label>
                        <input type="text" id="teacherName" class="form-control" placeholder="أدخل اسم المعلم">
                    </div>
                    <div class="form-group">
                        <label for="educationDept">الإدارة التعليمية</label>
                        <input type="text" id="educationDept" class="form-control" placeholder="أدخل اسم الإدارة التعليمية">
                    </div>
                    <div class="form-group">
                        <label for="schoolName">المدرسة</label>
                        <input type="text" id="schoolName" class="form-control" placeholder="أدخل اسم المدرسة">
                    </div>
                    <div class="form-group">
                        <label for="academicYear">العام الدراسي</label>
                        <input type="text" id="academicYear" class="form-control" placeholder="أدخل العام الدراسي">
                    </div>
                    <button class="btn" id="saveBasicInfo">حفظ البيانات</button>
                </div>
            </div>
            <!-- Introduction Tab -->
            <div class="tab-content" id="introduction">
                <div class="card">
                    <h2 class="card-title">المقدمة العامة</h2>
                    <div class="intro-content">
                        <p>إن التعليم هو حجر الأساس في بناء الأمم، ووسيلة فعّالة لتحقيق التنمية المستدامة، وصناعة المستقبل الواعد. وقد أولت المملكة العربية السعودية التعليم اهتمامًا بالغًا، ضمن مستهدفات رؤية المملكة 2030 التي تسعى إلى بناء مجتمع معرفي قادر على المنافسة عالميًا.</p>
                        <p>ويُعد المعلم أحد أهم عناصر العملية التعليمية، فهو الركيزة الأولى في تشكيل شخصية المتعلم، وصقل مهاراته، وتحقيق نواتج تعلم عالية الجودة.</p>
                        <p>ويأتي هذا الملف ليُوثق شواهد الأداء الوظيفي للمعلم، ويعكس جهوده المبذولة في أداء رسالته التربوية والتعليمية، ويُبرز ممارساته المهنية المستندة إلى معايير الكفاءة والجودة، سعيًا نحو التحسين المستمر والتميز في الأداء.</p>
                        <button class="edit-btn" onclick="editContent('generalIntro')"><i class="fas fa-edit"></i> تعديل</button>
                    </div>
                    <div class="edit-form" id="generalIntroForm" style="display: none;">
                        <textarea id="generalIntro" class="form-control" rows="6" placeholder="أدخل المقدمة العامة عن الموقع وأهدافه هنا...">إن التعليم هو حجر الأساس في بناء الأمم، ووسيلة فعّالة لتحقيق التنمية المستدامة، وصناعة المستقبل الواعد. وقد أولت المملكة العربية السعودية التعليم اهتمامًا بالغًا، ضمن مستهدفات رؤية المملكة 2030 التي تسعى إلى بناء مجتمع معرفي قادر على المنافسة عالميًا.
ويُعد المعلم أحد أهم عناصر العملية التعليمية، فهو الركيزة الأولى في تشكيل شخصية المتعلم، وصقل مهاراته، وتحقيق نواتج تعلم عالية الجودة.
ويأتي هذا الملف ليُوثق شواهد الأداء الوظيفي للمعلم، ويعكس جهوده المبذولة في أداء رسالته التربوية والتعليمية، ويُبرز ممارساته المهنية المستندة إلى معايير الكفاءة والجودة، سعيًا نحو التحسين المستمر والتميز في الأداء.</textarea>
                        <button class="btn" onclick="saveContent('generalIntro')">حفظ</button>
                        <button class="btn btn-secondary" onclick="cancelEdit('generalIntro')">إلغاء</button>
                    </div>
                </div>
                <div class="card">
                    <h2 class="card-title">الرؤية</h2>
                    <div class="intro-content">
                        <p>تحقيق تعليم نوعي عالي الجودة، يُسهم في بناء جيل واعٍ ومتمكن، منافس عالميًا، ومؤمن بقيمه الوطنية.</p>
                        <button class="edit-btn" onclick="editContent('vision')"><i class="fas fa-edit"></i> تعديل</button>
                    </div>
                    <div class="edit-form" id="visionForm" style="display: none;">
                        <textarea id="vision" class="form-control" rows="4" placeholder="أدخل نص الرؤية هنا...">تحقيق تعليم نوعي عالي الجودة، يُسهم في بناء جيل واعٍ ومتمكن، منافس عالميًا، ومؤمن بقيمه الوطنية.</textarea>
                        <button class="btn" onclick="saveContent('vision')">حفظ</button>
                        <button class="btn btn-secondary" onclick="cancelEdit('vision')">إلغاء</button>
                    </div>
                </div>
                <div class="card">
                    <h2 class="card-title">الرسالة</h2>
                    <div class="intro-content">
                        <p>تقديم تعليم محفّز على الإبداع والتميّز، قائم على معايير مهنية، يعزز من دور المعلم في قيادة التعلم، ويركز على تمكين المتعلم من المهارات والمعارف اللازمة لمواكبة التغيرات العالمية.</p>
                        <button class="edit-btn" onclick="editContent('mission')"><i class="fas fa-edit"></i> تعديل</button>
                    </div>
                    <div class="edit-form" id="missionForm" style="display: none;">
                        <textarea id="mission" class="form-control" rows="4" placeholder="أدخل نص الرسالة هنا...">تقديم تعليم محفّز على الإبداع والتميّز، قائم على معايير مهنية، يعزز من دور المعلم في قيادة التعلم، ويركز على تمكين المتعلم من المهارات والمعارف اللازمة لمواكبة التغيرات العالمية.</textarea>
                        <button class="btn" onclick="saveContent('mission')">حفظ</button>
                        <button class="btn btn-secondary" onclick="cancelEdit('mission')">إلغاء</button>
                    </div>
                </div>
                <div class="card">
                    <h2 class="card-title">القيم</h2>
                    <div class="intro-content">
                        <ul class="values-list">
                            <li><strong>المواطنة:</strong> تعزيز الانتماء الوطني والاعتزاز بالهوية السعودية.</li>
                            <li><strong>الجودة:</strong> الالتزام بمعايير الأداء والتميّز المؤسسي.</li>
                            <li><strong>المسؤولية:</strong> أداء الواجبات المهنية بأمانة ومصداقية.</li>
                            <li><strong>الابتكار:</strong> دعم الإبداع وتوظيف الحلول التقنية الحديثة.</li>
                            <li><strong>التمكين:</strong> بناء القدرات وتطوير الكفاءات التعليمية.</li>
                            <li><strong>العدالة:</strong> تحقيق المساواة وتكافؤ الفرص التعليمية.</li>
                        </ul>
                        <button class="edit-btn" onclick="editContent('values')"><i class="fas fa-edit"></i> تعديل</button>
                    </div>
                    <div class="edit-form" id="valuesForm" style="display: none;">
                        <textarea id="values" class="form-control" rows="6" placeholder="أدخل القيم هنا...">	•	المواطنة: تعزيز الانتماء الوطني والاعتزاز بالهوية السعودية.
    •	الجودة: الالتزام بمعايير الأداء والتميّز المؤسسي.
    •	المسؤولية: أداء الواجبات المهنية بأمانة ومصداقية.
    •	الابتكار: دعم الإبداع وتوظيف الحلول التقنية الحديثة.
    •	التمكين: بناء القدرات وتطوير الكفاءات التعليمية.
    •	العدالة: تحقيق المساواة وتكافؤ الفرص التعليمية</textarea>
                        <button class="btn" onclick="saveContent('values')">حفظ</button>
                        <button class="btn btn-secondary" onclick="cancelEdit('values')">إلغاء</button>
                    </div>
                </div>
            </div>
            <!-- Leaders Tab -->
            <div class="tab-content" id="leaders">
                <div class="card">
                    <h2 class="card-title">كلمات قادة التعليم</h2>
                    <div class="leaders-container">
                        <div class="leader-card">
                            <img src="https://i.top4top.io/p_3485a0uv82.jpeg " alt="صورة الملك سلمان" class="leader-img" id="kingImage">
                            <h3 class="leader-name">خادم الحرمين الشريفين الملك سلمان بن عبدالعزيز آل سعود – حفظه الله</h3>
                            <div class="leader-quote">
                                "إن التعليم في السعودية هو الركيزة الأساسية للتنمية، ونحن نولي أبناءنا الطلاب والطالبات جلّ اهتمامنا، ونوفر لهم أفضل سبل التعليم الحديث، فهم عماد المستقبل وأمله."
                            </div>
                        </div>
                        <div class="leader-card">
                            <img src="https://h.top4top.io/p_3485vnxie0.jpeg " alt="صورة ولي العهد" class="leader-img" id="princeImage">
                            <h3 class="leader-name">صاحب السمو الملكي الأمير محمد بن سلمان بن عبدالعزيز – ولي العهد رئيس مجلس الوزراء – حفظه الله</h3>
                            <div class="leader-quote">
                                "طموحنا أن نبني وطنًا أكثر ازدهارًا، يجد فيه كل مواطن ما يتمناه، ويشارك في بناء مستقبله. ولن يكون ذلك إلا بتعليم رائد يصنع جيلاً واعيًا ومؤهلاً للمنافسة عالميًا."
                            </div>
                        </div>
                        <div class="leader-card">
                            <img src="https://h.top4top.io/p_34853oi4r1.jpeg " alt="صورة وزير التعليم" class="leader-img" id="ministerImage">
                            <h3 class="leader-name">معالي وزير التعليم يوسف البنيان</h3>
                            <div class="leader-quote">
                                "نسعى في وزارة التعليم إلى تطوير المنظومة التعليمية بما يتماشى مع مستهدفات رؤية 2030، من خلال تمكين المعلم، وتحسين نواتج التعلم، وتوفير بيئة تعليمية محفزة للتميّز والإبداع."
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- CV Tab -->
            <div class="tab-content" id="cv">
                <div class="card">
                    <h2 class="card-title">البيانات الأساسية</h2>
                    <div class="form-group">
                        <label for="fullName">الاسم الكامل</label>
                        <input type="text" id="fullName" class="form-control" placeholder="أدخل الاسم الكامل">
                    </div>
                    <div class="form-group">
                        <label for="specialization">التخصص</label>
                        <input type="text" id="specialization" class="form-control" placeholder="أدخل التخصص">
                    </div>
                    <div class="form-group">
                        <label for="qualification">المؤهل العلمي</label>
                        <input type="text" id="qualification" class="form-control" placeholder="أدخل المؤهل العلمي">
                    </div>
                    <div class="form-group">
                        <label for="graduationYear">سنة التخرج</label>
                        <input type="text" id="graduationYear" class="form-control" placeholder="أدخل سنة التخرج">
                    </div>
                    <div class="form-group">
                        <label for="yearsOfExperience">سنوات الخبرة</label>
                        <input type="number" id="yearsOfExperience" class="form-control" placeholder="أدخل عدد سنوات الخبرة">
                    </div>
                    <button class="btn" id="saveCV">حفظ البيانات</button>
                </div>
                <div class="card">
                    <h2 class="card-title">الرخصة المهنية</h2>
                    <div class="certificate-item" style="cursor: pointer; height: 200px;" onclick="document.getElementById('licenseUpload').click();">
                        <div class="upload-icon" id="licenseUploadIcon">
                            <i class="fas fa-upload"></i>
                            <p>اضغط لرفع صورة الرخصة المهنية</p>
                            <small style="display: block; margin-top: 5px; color: #777; font-size: 12px;">يمكنك رفع صور بصيغة JPG أو PNG أو GIF</small>
                        </div>
                        <img id="licensePreview" style="display: none; max-height: 100%; object-fit: contain;">
                        <input type="file" id="licenseUpload" accept="image/jpeg, image/png, image/gif" style="display: none;">
                    </div>
                </div>
                <div class="card">
                    <h2 class="card-title">شهادات الشكر والتقدير</h2>
                    <div class="certificates-container" id="certificatesContainer">
                        <!-- Certificate upload items will be generated here -->
                    </div>
                </div>
                <div class="card">
                    <h2 class="card-title">الدورات التدريبية</h2>
                    <div class="training-courses" id="trainingCourses">
                        <!-- Training courses will be added here -->
                    </div>
                    <button class="add-course-btn" id="addCourseBtn">
                        <i class="fas fa-plus"></i>
                        إضافة دورة تدريبية
                    </button>
                </div>
            </div>
            <!-- Performance Tab -->
            <div class="tab-content" id="performance">
                <div id="performanceItems">
                    <!-- Performance items will be generated here -->
                </div>
                <div class="performance-result">
                    <h3 class="result-title">نتيجة التقييم الذاتي</h3>
                    <div class="result-score" id="totalScore">0%</div>
                    <p class="result-description" id="scoreDescription">قم بتقييم بنود الأداء للحصول على النتيجة</p>
                </div>
            </div>
            <!-- Follow-up Tab -->
            <div class="tab-content" id="followup">
                <div class="follow-up-container">
                    <div class="card">
                        <h2 class="card-title">المتابعة الأولى</h2>
                        <div class="form-group">
                            <label for="firstFollowupDate">تاريخ المتابعة</label>
                            <input type="date" id="firstFollowupDate" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="firstFollowupNotes">ملاحظات المتابعة</label>
                            <textarea id="firstFollowupNotes" class="form-control" rows="6" placeholder="أدخل ملاحظات المتابعة الأولى هنا..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="firstFollowupName">اسم المتابع</label>
                            <input type="text" id="firstFollowupName" class="form-control" placeholder="أدخل اسم المتابع">
                        </div>
                    </div>
                    <div class="card">
                        <h2 class="card-title">المتابعة الثانية</h2>
                        <div class="form-group">
                            <label for="secondFollowupDate">تاريخ المتابعة</label>
                            <input type="date" id="secondFollowupDate" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="secondFollowupNotes">ملاحظات المتابعة</label>
                            <textarea id="secondFollowupNotes" class="form-control" rows="6" placeholder="أدخل ملاحظات المتابعة الثانية هنا..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="secondFollowupName">اسم المتابع</label>
                            <input type="text" id="secondFollowupName" class="form-control" placeholder="أدخل اسم المتابع">
                        </div>
                    </div>
                </div>
                <div class="card" style="margin-top: 20px;">
                    <h2 class="card-title">التوصيات</h2>
                    <div class="form-group">
                        <textarea id="recommendations" class="form-control" rows="6" placeholder="أدخل التوصيات هنا..."></textarea>
                    </div>
                </div>
                <button class="btn" id="saveFollowup" style="margin-top: 20px;">حفظ المعلومات</button>
            </div>
            <!-- Improvement Plan Tab -->
            <div class="tab-content" id="improvement">
                <div class="card">
                    <h2 class="card-title">خطة التحسين المقترحة</h2>
                    <p>بناءً على التقييم الذاتي وملاحظات المتابعة، يمكن وضع خطة تحسين للجوانب التي تحتاج إلى تطوير في الأداء الوظيفي.</p>
                    <div class="improvement-form">
                        <div class="form-group">
                            <label for="improvementArea">مجال التحسين</label>
                            <select id="improvementArea" class="form-control">
                                <option value="">اختر مجال التحسين</option>
                                <option value="أداء الواجبات الوظيفية">أداء الواجبات الوظيفية</option>
                                <option value="التفاعل مع المجتمع المهني">التفاعل مع المجتمع المهني</option>
                                <option value="التفاعل مع أولياء الأمور">التفاعل مع أولياء الأمور</option>
                                <option value="تنويع استراتيجيات التدريس">تنويع استراتيجيات التدريس</option>
                                <option value="تحسين نتائج المتعلمين">تحسين نتائج المتعلمين</option>
                                <option value="إعداد وتنفيذ خطة التعلم">إعداد وتنفيذ خطة التعلم</option>
                                <option value="توظيف التقنيات والوسائل">توظيف التقنيات والوسائل</option>
                                <option value="تهيئة البيئة التعليمية">تهيئة البيئة التعليمية</option>
                                <option value="الإدارة الصفية">الإدارة الصفية</option>
                                <option value="تحليل نتائج المتعلمين">تحليل نتائج المتعلمين</option>
                                <option value="تنوع أساليب التقويم">تنوع أساليب التقويم</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="improvementPriority">أولوية التحسين</label>
                            <select id="improvementPriority" class="form-control">
                                <option value="">اختر الأولوية</option>
                                <option value="عالية">عالية</option>
                                <option value="متوسطة">متوسطة</option>
                                <option value="منخفضة">منخفضة</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="improvementGoal">هدف التحسين</label>
                            <input type="text" id="improvementGoal" class="form-control" placeholder="أدخل هدف التحسين">
                        </div>
                        <div class="form-group">
                            <label for="improvementActions">الإجراءات المقترحة</label>
                            <textarea id="improvementActions" class="form-control" rows="4" placeholder="أدخل الإجراءات المقترحة للتحسين"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="improvementStartDate">تاريخ البداية</label>
                            <input type="date" id="improvementStartDate" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="improvementEndDate">تاريخ النهاية</label>
                            <input type="date" id="improvementEndDate" class="form-control">
                        </div>
                        <button class="btn" id="addImprovementBtn">إضافة خطة تحسين</button>
                    </div>
                    <div class="improvement-items" id="improvementItems">
                        <!-- Improvement items will be added here -->
                    </div>
                </div>
            </div>
        </div>
        <!-- Update Data Modal -->
        <div class="modal" id="updateDataModal">
            <div class="modal-content">
                <span class="close-modal" id="closeUpdateModal">&times;</span>
                <h3 class="modal-title">تحديث البيانات الأساسية</h3>
                <div class="form-group">
                    <label for="modalTeacherName">اسم المعلم</label>
                    <input type="text" id="modalTeacherName" class="form-control" placeholder="أدخل اسم المعلم">
                </div>
                <div class="form-group">
                    <label for="modalEducationDept">الإدارة التعليمية</label>
                    <input type="text" id="modalEducationDept" class="form-control" placeholder="أدخل اسم الإدارة التعليمية">
                </div>
                <div class="form-group">
                    <label for="modalSchoolName">المدرسة</label>
                    <input type="text" id="modalSchoolName" class="form-control" placeholder="أدخل اسم المدرسة">
                </div>
                <div class="form-group">
                    <label for="modalAcademicYear">العام الدراسي</label>
                    <input type="text" id="modalAcademicYear" class="form-control" placeholder="أدخل العام الدراسي">
                </div>
                <button class="btn" id="saveModalData">حفظ البيانات</button>
            </div>
        </div>
        <!-- Note Modal -->
        <div class="modal" id="noteModal">
            <div class="modal-content">
                <span class="close-modal" id="closeNoteModal">&times;</span>
                <h3 class="modal-title">إضافة ملاحظة</h3>
                <div class="form-group">
                    <textarea id="noteText" class="form-control" rows="6" placeholder="أدخل ملاحظتك هنا..."></textarea>
                </div>
                <button class="btn" id="saveNote">حفظ الملاحظة</button>
            </div>
        </div>
        <!-- Preview Modal -->
        <div class="preview-modal" id="previewModal">
            <div class="preview-content">
                <span class="close-preview" id="closePreview">&times;</span>
                <div id="previewContainer"></div>
            </div>
        </div>
        <!-- Toast Notification -->
        <div class="toast" id="toast"></div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        // Import Firebase modules
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js ';
        import { getFirestore, doc, setDoc, getDoc, collection, addDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js ';
        import { getStorage, ref, uploadBytes, getDownloadURL } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js ';

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "your-api-key-here",
            authDomain: "testm2-6ffa1.firebaseapp.com",
            projectId: "testm2-6ffa1",
            storageBucket: "testm2-6ffa1.appspot.com",
            messagingSenderId: "your-sender-id",
            appId: "your-app-id"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const storage = getStorage(app);

        // Global variables
        const teacherId = 'teacher_001'; // In real app, this would come from authentication

        // Firebase service functions
        const FirebaseService = {
            async saveData(path, data) {
                try {
                    const fullPath = `data/${path}`;
                    const parts = fullPath.split('/');
                    if (parts.length % 2 !== 0) {
                        console.error('Invalid document reference:', fullPath);
                        return { success: false, error: `Invalid document reference: ${fullPath}` };
                    }
                    const docRef = doc(db, 'teachers', teacherId, ...parts);
                    await setDoc(docRef, data, { merge: true });
                    return { success: true };
                } catch (error) {
                    console.error('Error saving data:', error);
                    return { success: false, error: error.message };
                }
            },
            async getData(path) {
                try {
                    const fullPath = `data/${path}`;
                    const parts = fullPath.split('/');
                    if (parts.length % 2 !== 0) {
                        return { success: false, error: `Invalid path: ${fullPath}` };
                    }
                    const docRef = doc(db, 'teachers', teacherId, ...parts);
                    const docSnap = await getDoc(docRef);
                    if (docSnap.exists()) {
                        return { success: true, data: docSnap.data() };
                    } else {
                        return { success: false, error: 'No data found' };
                    }
                } catch (error) {
                    console.error('Error getting data:', error);
                    return { success: false, error: error.message };
                }
            },
            async uploadFile(file, path) {
                try {
                    const storageRef = ref(storage, `${teacherId}/${path}/${Date.now()}_${file.name}`);
                    const snapshot = await uploadBytes(storageRef, file);
                    const downloadURL = await getDownloadURL(snapshot.ref);
                    return { success: true, url: downloadURL };
                } catch (error) {
                    console.error('Error uploading file:', error);
                    return { success: false, error: error.message };
                }
            },
            async saveToCollection(collectionPath, data) {
                try {
                    const colRef = collection(db, 'teachers', teacherId, 'data', collectionPath);
                    await addDoc(colRef, data);
                    return { success: true };
                } catch (error) {
                    console.error('Error saving to collection:', error);
                    return { success: false, error: error.message };
                }
            }
        };

        window.FirebaseService = FirebaseService;
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Sidebar functionality
            const menuToggle = document.getElementById('menuToggle');
            const closeSidebar = document.getElementById('closeSidebar');
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('overlay');
            const menuItems = document.querySelectorAll('.menu-item');

            menuToggle.addEventListener('click', () => {
                sidebar.classList.add('active');
                overlay.style.display = 'block';
            });

            closeSidebar.addEventListener('click', () => {
                sidebar.classList.remove('active');
                overlay.style.display = 'none';
            });

            overlay.addEventListener('click', () => {
                sidebar.classList.remove('active');
                overlay.style.display = 'none';
            });

            menuItems.forEach(item => {
                item.addEventListener('click', () => {
                    const tab = item.querySelector('a').dataset.tab;
                    document.querySelectorAll('.tab-link').forEach(link => link.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                    document.querySelector(`.tab-link[data-tab="${tab}"]`).classList.add('active');
                    document.getElementById(tab).classList.add('active');
                    sidebar.classList.remove('active');
                    overlay.style.display = 'none';
                });
            });

            // Tab Navigation
            document.querySelectorAll('.tab-link').forEach(link => {
                link.addEventListener('click', function() {
                    const tabId = this.dataset.tab;
                    document.querySelectorAll('.tab-link').forEach(link => link.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                    this.classList.add('active');
                    document.getElementById(tabId).classList.add('active');
                });
            });

            // Initialize performance items
            const performanceData = [
                { id: 1, title: 'أداء الواجبات الوظيفية', description: 'تنفيذ المهام والواجبات الوظيفية بكفاءة وفعالية', weight: '10%' },
                { id: 2, title: 'التفاعل مع المجتمع المهني', description: 'المشاركة الفعالة في المجتمع المهني والتعاون مع الزملاء', weight: '10%' },
                { id: 3, title: 'التفاعل مع أولياء الأمور', description: 'التواصل الفعال مع أولياء الأمور وإشراكهم في العملية التعليمية', weight: '10%' },
                { id: 4, title: 'تنويع استراتيجيات التدريس', description: 'استخدام استراتيجيات تدريس متنوعة تناسب احتياجات المتعلمين', weight: '10%' },
                { id: 5, title: 'تحسين نتائج المتعلمين', description: 'العمل على تحسين نتائج المتعلمين وتطوير مستواهم الأكاديمي', weight: '10%' },
                { id: 6, title: 'إعداد وتنفيذ خطة التعلم', description: 'إعداد وتنفيذ خطط تعليمية فعالة تحقق أهداف المنهج', weight: '10%' },
                { id: 7, title: 'توظيف التقنيات والوسائل', description: 'استخدام التقنيات والوسائل التعليمية بشكل فعال في العملية التعليمية', weight: '10%' },
                { id: 8, title: 'تهيئة البيئة التعليمية', description: 'تهيئة بيئة تعليمية محفزة وآمنة للمتعلمين', weight: '5%' },
                { id: 9, title: 'الإدارة الصفية', description: 'إدارة الصف بشكل فعال وتنظيم وقت التعلم', weight: '5%' },
                { id: 10, title: 'تحليل نتائج المتعلمين', description: 'تحليل نتائج المتعلمين واستخدامها في تحسين العملية التعليمية', weight: '10%' },
                { id: 11, title: 'تنوع أساليب التقويم', description: 'استخدام أساليب تقويم متنوعة لقياس تقدم المتعلمين', weight: '10%' }
            ];

            const performanceItemsContainer = document.getElementById('performanceItems');
            performanceData.forEach(item => {
                const performanceItem = document.createElement('div');
                performanceItem.className = 'performance-item';
                performanceItem.dataset.id = item.id;
                performanceItem.dataset.weight = parseInt(item.weight);
                performanceItem.innerHTML = `
                    <div class="performance-header">
                        <div class="performance-title">${item.title}</div>
                        <div class="performance-weight">${item.weight}</div>
                    </div>
                    <div class="performance-description">${item.description}</div>
                    <div class="evidence-container">
                        <div class="evidence-item">
                            <div class="upload-icon">
                                <i class="fas fa-upload"></i>
                                <p>شاهد 1</p>
                            </div>
                            <img class="evidence-preview" style="display: none;">
                            <input type="file" class="evidence-upload" accept="image/jpeg, image/png, image/gif">
                        </div>
                        <div class="evidence-item">
                            <div class="upload-icon">
                                <i class="fas fa-upload"></i>
                                <p>شاهد 2</p>
                            </div>
                            <img class="evidence-preview" style="display: none;">
                            <input type="file" class="evidence-upload" accept="image/jpeg, image/png, image/gif">
                        </div>
                        <div class="evidence-item">
                            <div class="upload-icon">
                                <i class="fas fa-upload"></i>
                                <p>شاهد 3</p>
                            </div>
                            <img class="evidence-preview" style="display: none;">
                            <input type="file" class="evidence-upload" accept="image/jpeg, image/png, image/gif">
                        </div>
                        <div class="evidence-item">
                            <div class="upload-icon">
                                <i class="fas fa-upload"></i>
                                <p>شاهد 4</p>
                            </div>
                            <img class="evidence-preview" style="display: none;">
                            <input type="file" class="evidence-upload" accept="image/jpeg, image/png, image/gif">
                        </div>
                    </div>
                    <div class="note-container">
                        <textarea class="form-control performance-note" placeholder="أدخل ملاحظاتك حول هذا المؤشر هنا..." data-id="${item.id}"></textarea>
                    </div>
                    <div class="rating-container">
                        <div class="rating-label">التقييم الذاتي:</div>
                        <input type="range" class="rating-slider" min="1" max="5" value="1" data-id="${item.id}">
                        <div class="rating-value">1</div>
                    </div>
                `;
                performanceItemsContainer.appendChild(performanceItem);
            });

            // Generate certificate upload items
            const certificatesContainer = document.getElementById('certificatesContainer');
            for (let i = 0; i < 8; i++) {
                const certificateItem = document.createElement('div');
                certificateItem.className = 'certificate-item';
                certificateItem.innerHTML = `
                    <div class="upload-icon">
                        <i class="fas fa-upload"></i>
                        <p>شهادة ${i + 1}</p>
                    </div>
                    <img class="certificate-preview" style="display: none;">
                    <input type="file" class="certificate-upload" accept="image/jpeg, image/png, image/gif">
                `;
                certificatesContainer.appendChild(certificateItem);
            }

            // Show toast notification
            function showToast(message) {
                const toast = document.getElementById('toast');
                toast.textContent = message;
                toast.classList.add('show');
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 3000);
            }

            // Update teacher info in header
            function updateTeacherInfo(data) {
                const teacherInfoHeader = document.getElementById('teacherInfoHeader');
                const headerTeacherName = document.getElementById('headerTeacherName');
                if (data.name) {
                    headerTeacherName.textContent = " " + data.name;
                } else {
                    headerTeacherName.textContent = '';
                }
                if (data.name || data.department || data.school || data.year) {
                    teacherInfoHeader.innerHTML = `
                        <p><strong>المعلم:</strong> ${data.name || 'غير محدد'}</p>
                        <p><strong>الإدارة:</strong> ${data.department || 'غير محدد'}</p>
                        <p><strong>المدرسة:</strong> ${data.school || 'غير محدد'}</p>
                        <p><strong>العام الدراسي:</strong> ${data.year || 'غير محدد'}</p>
                    `;
                } else {
                    teacherInfoHeader.innerHTML = '<p>لم يتم إدخال البيانات بعد</p>';
                }
            }

            // Load teacher info on page load
            async function loadTeacherInfo() {
                if (window.FirebaseService) {
                    const result = await window.FirebaseService.getData('basic');
                    if (result.success) {
                        const data = result.data;
                        updateTeacherInfo(data);
                        document.getElementById('teacherName').value = data.name || '';
                        document.getElementById('educationDept').value = data.department || '';
                        document.getElementById('schoolName').value = data.school || '';
                        document.getElementById('academicYear').value = data.year || '';
                    }
                }
            }
            loadTeacherInfo();

            // Save Basic Info
            const saveBasicInfo = document.getElementById('saveBasicInfo');
            saveBasicInfo.addEventListener('click', async function() {
                const teacherData = {
                    name: document.getElementById('teacherName').value,
                    department: document.getElementById('educationDept').value,
                    school: document.getElementById('schoolName').value,
                    year: document.getElementById('academicYear').value,
                    updatedAt: new Date().toISOString()
                };

                if (window.FirebaseService) {
                    const result = await window.FirebaseService.saveData('basic', teacherData);
                    if (result.success) {
                        updateTeacherInfo(teacherData);
                        showToast('تم حفظ البيانات بنجاح!');
                    } else {
                        showToast('حدث خطأ أثناء الحفظ: ' + result.error);
                    }
                }
            });

            // Update Data Modal
            const updateDataBtn = document.getElementById('updateDataBtn');
            const updateDataModal = document.getElementById('updateDataModal');
            const closeUpdateModal = document.getElementById('closeUpdateModal');
            const saveModalData = document.getElementById('saveModalData');

            updateDataBtn.addEventListener('click', async function() {
                if (window.FirebaseService) {
                    const result = await window.FirebaseService.getData('basic');
                    if (result.success) {
                        const data = result.data;
                        document.getElementById('modalTeacherName').value = data.name || '';
                        document.getElementById('modalEducationDept').value = data.department || '';
                        document.getElementById('modalSchoolName').value = data.school || '';
                        document.getElementById('modalAcademicYear').value = data.year || '';
                    }
                }
                updateDataModal.style.display = 'flex';
            });

            closeUpdateModal.addEventListener('click', function() {
                updateDataModal.style.display = 'none';
            });

            saveModalData.addEventListener('click', async function() {
                const teacherData = {
                    name: document.getElementById('modalTeacherName').value,
                    department: document.getElementById('modalEducationDept').value,
                    school: document.getElementById('modalSchoolName').value,
                    year: document.getElementById('modalAcademicYear').value,
                    updatedAt: new Date().toISOString()
                };

                if (window.FirebaseService) {
                    const result = await window.FirebaseService.saveData('basic', teacherData);
                    if (result.success) {
                        updateTeacherInfo(teacherData);
                        document.getElementById('teacherName').value = teacherData.name;
                        document.getElementById('educationDept').value = teacherData.department;
                        document.getElementById('schoolName').value = teacherData.school;
                        document.getElementById('academicYear').value = teacherData.year;
                        showToast('تم تحديث البيانات بنجاح!');
                        setTimeout(() => updateDataModal.style.display = 'none', 2000);
                    } else {
                        showToast('حدث خطأ أثناء الحفظ: ' + result.error);
                    }
                }
            });

            // Edit content functions
            window.editContent = function(contentId) {
                document.getElementById(contentId + 'Form').style.display = 'block';
                document.getElementById(contentId + 'Form').previousElementSibling.style.display = 'none';
            };

            window.saveContent = async function(contentId) {
                const textarea = document.getElementById(contentId);
                const content = textarea.value;
                const form = document.getElementById(contentId + 'Form');
                const contentElement = form.previousElementSibling;

                if (window.FirebaseService) {
                    const introData = {};
                    introData[contentId] = content;
                    introData.updatedAt = new Date().toISOString();
                    const result = await window.FirebaseService.saveData('introduction', introData);
                    if (result.success) {
                        updateContentDisplay(contentId, content, contentElement, form);
                        showToast('تم حفظ المحتوى بنجاح!');
                    } else {
                        showToast('حدث خطأ أثناء الحفظ: ' + result.error);
                    }
                }
                form.style.display = 'none';
                contentElement.style.display = 'block';
            };

            function updateContentDisplay(contentId, content, contentElement, form) {
                if (contentId === 'values') {
                    const valuesList = contentElement.querySelector('.values-list');
                    valuesList.innerHTML = '';
                    const lines = content.split('\n');
                    lines.forEach(line => {
                        if (line.trim()) {
                            const parts = line.split(':');
                            if (parts.length >= 2) {
                                const valueName = parts[0].replace('•', '').trim();
                                const valueDesc = parts.slice(1).join(':').trim();
                                const li = document.createElement('li');
                                li.innerHTML = `<strong>${valueName}:</strong> ${valueDesc}`;
                                valuesList.appendChild(li);
                            }
                        }
                    });
                } else {
                    const contentDiv = contentElement.querySelector('p') ? contentElement : contentElement.querySelector('.intro-content');
                    contentDiv.innerHTML = '';
                    const paragraphs = content.split('\n');
                    paragraphs.forEach(para => {
                        if (para.trim()) {
                            const p = document.createElement('p');
                            p.textContent = para.trim();
                            contentDiv.appendChild(p);
                        }
                    });
                    const editBtn = document.createElement('button');
                    editBtn.className = 'edit-btn';
                    editBtn.innerHTML = '<i class="fas fa-edit"></i> تعديل';
                    editBtn.onclick = function() { window.editContent(contentId); };
                    contentDiv.appendChild(editBtn);
                }
                form.style.display = 'none';
                contentElement.style.display = 'block';
            }

            window.cancelEdit = function(contentId) {
                document.getElementById(contentId + 'Form').style.display = 'none';
                document.getElementById(contentId + 'Form').previousElementSibling.style.display = 'block';
            };

            // Load introduction data
            async function loadIntroductionData() {
                if (window.FirebaseService) {
                    const result = await window.FirebaseService.getData('introduction');
                    if (result.success) {
                        const data = result.data;
                        document.getElementById('vision').value = data.vision || 'تحقيق تعليم نوعي عالي الجودة، يُسهم في بناء جيل واعٍ ومتمكن، منافس عالميًا، ومؤمن بقيمه الوطنية.';
                        document.getElementById('mission').value = data.mission || 'تقديم تعليم محفّز على الإبداع والتميّز، قائم على معايير مهنية، يعزز من دور المعلم في قيادة التعلم، ويركز على تمكين المتعلم من المهارات والمعارف اللازمة لمواكبة التغيرات العالمية.';
                        document.getElementById('values').value = data.values || '	•	المواطنة: تعزيز الانتماء الوطني والاعتزاز بالهوية السعودية.\n	•	الجودة: الالتزام بمعايير الأداء والتميّز المؤسسي.\n	•	المسؤولية: أداء الواجبات المهنية بأمانة ومصداقية.\n	•	الابتكار: دعم الإبداع وتوظيف الحلول التقنية الحديثة.\n	•	التمكين: بناء القدرات وتطوير الكفاءات التعليمية.\n	•	العدالة: تحقيق المساواة وتكافؤ الفرص التعليمية';
                        document.getElementById('generalIntro').value = data.generalIntro || 'إن التعليم هو حجر الأساس في بناء الأمم، ووسيلة فعّالة لتحقيق التنمية المستدامة، وصناعة المستقبل الواعد. وقد أولت المملكة العربية السعودية التعليم اهتمامًا بالغًا، ضمن مستهدفات رؤية المملكة 2030 التي تسعى إلى بناء مجتمع معرفي قادر على المنافسة عالميًا.\nويُعد المعلم أحد أهم عناصر العملية التعليمية، فهو الركيزة الأولى في تشكيل شخصية المتعلم، وصقل مهاراته، وتحقيق نواتج تعلم عالية الجودة.\nويأتي هذا الملف ليُوثق شواهد الأداء الوظيفي للمعلم، ويعكس جهوده المبذولة في أداء رسالته التربوية والتعليمية، ويُبرز ممارساته المهنية المستندة إلى معايير الكفاءة والجودة، سعيًا نحو التحسين المستمر والتميز في الأداء.';
                    }
                }
            }
            loadIntroductionData();

            // Upload leader images
            document.getElementById('kingImage').addEventListener('click', async function() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = 'image/*';
                input.onchange = async function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        const result = await window.FirebaseService.uploadFile(file, 'leaders/king');
                        if (result.success) {
                            document.getElementById('kingImage').src = result.url;
                            await window.FirebaseService.saveData('leaders', { kingImage: result.url });
                            showToast('تم رفع الصورة بنجاح!');
                        } else {
                            showToast('حدث خطأ أثناء الرفع: ' + result.error);
                        }
                    }
                };
                input.click();
            });

            document.getElementById('princeImage').addEventListener('click', async function() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = 'image/*';
                input.onchange = async function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        const result = await window.FirebaseService.uploadFile(file, 'leaders/prince');
                        if (result.success) {
                            document.getElementById('princeImage').src = result.url;
                            await window.FirebaseService.saveData('leaders', { princeImage: result.url });
                            showToast('تم رفع الصورة بنجاح!');
                        } else {
                            showToast('حدث خطأ أثناء الرفع: ' + result.error);
                        }
                    }
                };
                input.click();
            });

            document.getElementById('ministerImage').addEventListener('click', async function() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = 'image/*';
                input.onchange = async function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        const result = await window.FirebaseService.uploadFile(file, 'leaders/minister');
                        if (result.success) {
                            document.getElementById('ministerImage').src = result.url;
                            await window.FirebaseService.saveData('leaders', { ministerImage: result.url });
                            showToast('تم رفع الصورة بنجاح!');
                        } else {
                            showToast('حدث خطأ أثناء الرفع: ' + result.error);
                        }
                    }
                };
                input.click();
            });

            // Save CV
            const saveCV = document.getElementById('saveCV');
            saveCV.addEventListener('click', async function() {
                const cvData = {
                    fullName: document.getElementById('fullName').value,
                    specialization: document.getElementById('specialization').value,
                    qualification: document.getElementById('qualification').value,
                    graduationYear: document.getElementById('graduationYear').value,
                    yearsOfExperience: document.getElementById('yearsOfExperience').value,
                    updatedAt: new Date().toISOString()
                };

                if (window.FirebaseService) {
                    const result = await window.FirebaseService.saveData('cv', cvData);
                    if (result.success) {
                        showToast('تم حفظ المعلومات بنجاح!');
                    } else {
                        showToast('حدث خطأ أثناء الحفظ: ' + result.error);
                    }
                }
            });

            // Load CV data
            async function loadCVData() {
                if (window.FirebaseService) {
                    const result = await window.FirebaseService.getData('cv');
                    if (result.success) {
                        const data = result.data;
                        document.getElementById('fullName').value = data.fullName || '';
                        document.getElementById('specialization').value = data.specialization || '';
                        document.getElementById('qualification').value = data.qualification || '';
                        document.getElementById('graduationYear').value = data.graduationYear || '';
                        document.getElementById('yearsOfExperience').value = data.yearsOfExperience || '';
                    }
                }
            }
            loadCVData();

            // Upload license
            document.getElementById('licenseUpload').addEventListener('change', async function(e) {
                const file = e.target.files[0];
                if (file) {
                    const result = await window.FirebaseService.uploadFile(file, 'cv/license');
                    if (result.success) {
                        document.getElementById('licensePreview').src = result.url;
                        document.getElementById('licensePreview').style.display = 'block';
                        document.getElementById('licenseUploadIcon').style.display = 'none';
                        await window.FirebaseService.saveData('cv', { licenseImage: result.url });
                        showToast('تم رفع الصورة بنجاح!');
                    } else {
                        showToast('حدث خطأ أثناء الرفع: ' + result.error);
                    }
                }
            });

            // Upload certificates
            document.querySelectorAll('.certificate-upload').forEach((upload, index) => {
                upload.addEventListener('change', async function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        const result = await window.FirebaseService.uploadFile(file, `cv/certificates/${index}`);
                        if (result.success) {
                            const preview = upload.previousElementSibling;
                            const icon = preview.previousElementSibling;
                            preview.src = result.url;
                            preview.style.display = 'block';
                            icon.style.display = 'none';
                            const certData = {};
                            certData[`certificate_${index}`] = result.url;
                            await window.FirebaseService.saveData('cv', certData);
                            showToast('تم رفع الشهادة بنجاح!');
                        } else {
                            showToast('حدث خطأ أثناء الرفع: ' + result.error);
                        }
                    }
                });
            });

            // Add training course
            const addCourseBtn = document.getElementById('addCourseBtn');
            const trainingCourses = document.getElementById('trainingCourses');
            addCourseBtn.addEventListener('click', function() {
                const courseItem = document.createElement('div');
                courseItem.className = 'course-item';
                courseItem.innerHTML = `
                    <input type="text" class="course-input course-name" placeholder="اسم البرنامج">
                    <input type="date" class="course-input course-date" placeholder="تاريخ البرنامج">
                    <input type="number" class="course-input course-hours" placeholder="عدد الساعات" min="1">
                    <button class="remove-course-btn">
                        <i class="fas fa-trash"></i>
                    </button>
                `;
                trainingCourses.appendChild(courseItem);
                courseItem.querySelector('.remove-course-btn').addEventListener('click', function() {
                    courseItem.remove();
                    saveCourses();
                });
                courseItem.querySelectorAll('.course-input').forEach(input => {
                    input.addEventListener('input', saveCourses);
                });
                saveCourses();
            });

            async function saveCourses() {
                const courses = [];
                document.querySelectorAll('.course-item').forEach(item => {
                    courses.push({
                        name: item.querySelector('.course-name')?.value || '',
                        date: item.querySelector('.course-date')?.value || '',
                        hours: item.querySelector('.course-hours')?.value || ''
                    });
                });
                if (window.FirebaseService) {
                    await window.FirebaseService.saveData('cv/courses', { courses });
                }
            }

            // Upload evidence
            document.querySelectorAll('.evidence-upload').forEach((upload, index) => {
                upload.addEventListener('change', async function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        const performanceItem = upload.closest('.performance-item');
                        const performanceId = performanceItem.dataset.id;
                        const result = await window.FirebaseService.uploadFile(file, `performance/${performanceId}/evidence/${index}`);
                        if (result.success) {
                            const preview = upload.previousElementSibling;
                            const icon = preview.previousElementSibling;
                            preview.src = result.url;
                            preview.style.display = 'block';
                            icon.style.display = 'none';
                            const evidenceData = {};
                            evidenceData[`evidence_${index}`] = result.url;
                            await window.FirebaseService.saveData(`performance/${performanceId}`, evidenceData);
                            showToast('تم رفع الشاهد بنجاح!');
                        } else {
                            showToast('حدث خطأ أثناء الرفع: ' + result.error);
                        }
                    }
                });
            });

            // Save notes
            document.querySelectorAll('.performance-note').forEach(note => {
                note.addEventListener('input', async function() {
                    const performanceId = this.dataset.id;
                    const noteData = { note: this.value };
                    await window.FirebaseService.saveData(`performance/${performanceId}`, noteData);
                });
            });

            // Rating sliders
            document.querySelectorAll('.rating-slider').forEach(slider => {
                slider.addEventListener('input', async function() {
                    const value = this.value;
                    this.nextElementSibling.textContent = value;
                    const performanceId = this.dataset.id;
                    await window.FirebaseService.saveData(`performance/${performanceId}`, { rating: parseInt(value) });
                    updateTotalScore();
                });
            });

            // Update total score
            async function updateTotalScore() {
                let ratings = {};
                for (let i = 1; i <= 11; i++) {
                    const result = await window.FirebaseService.getData(`performance/${i}`);
                    if (result.success && result.data.rating) {
                        ratings[i] = result.data.rating;
                    }
                }
                let totalScore = 0;
                let totalWeight = 0;
                let ratedItemsCount = 0;
                document.querySelectorAll('.performance-item').forEach(item => {
                    const id = item.dataset.id;
                    const weight = parseInt(item.dataset.weight);
                    const rating = ratings[id] ? parseInt(ratings[id]) : 0;
                    if (rating > 0) {
                        totalScore += (rating / 5) * weight;
                        totalWeight += weight;
                        ratedItemsCount++;
                    }
                });
                const percentage = totalWeight > 0 ? Math.round((totalScore / totalWeight) * 100) : 0;
                document.getElementById('totalScore').textContent = `${percentage}%`;
                const scoreDescription = document.getElementById('scoreDescription');
                if (ratedItemsCount === 0) {
                    scoreDescription.textContent = 'قم بتقييم بنود الأداء للحصول على النتيجة';
                } else if (percentage >= 90) scoreDescription.textContent = 'ممتاز - أداء متميز';
                else if (percentage >= 80) scoreDescription.textContent = 'جيد جداً - أداء فوق المتوسط';
                else if (percentage >= 70) scoreDescription.textContent = 'جيد - أداء متوسط';
                else if (percentage >= 60) scoreDescription.textContent = 'مقبول - يحتاج إلى تحسين';
                else scoreDescription.textContent = 'ضعيف - يحتاج إلى تطوير كبير';

                await window.FirebaseService.saveData('performance/total', { score: percentage });
            }
            updateTotalScore();

            // Save Follow-up
            const saveFollowup = document.getElementById('saveFollowup');
            saveFollowup.addEventListener('click', async function() {
                const followupData = {
                    firstDate: document.getElementById('firstFollowupDate').value,
                    firstNotes: document.getElementById('firstFollowupNotes').value,
                    firstName: document.getElementById('firstFollowupName').value,
                    secondDate: document.getElementById('secondFollowupDate').value,
                    secondNotes: document.getElementById('secondFollowupNotes').value,
                    secondName: document.getElementById('secondFollowupName').value,
                    recommendations: document.getElementById('recommendations').value,
                    updatedAt: new Date().toISOString()
                };

                if (window.FirebaseService) {
                    const result = await window.FirebaseService.saveData('followup', followupData);
                    if (result.success) {
                        showToast('تم حفظ المعلومات بنجاح!');
                    } else {
                        showToast('حدث خطأ أثناء الحفظ: ' + result.error);
                    }
                }
            });

            // Add Improvement Plan
            const addImprovementBtn = document.getElementById('addImprovementBtn');
            const improvementItems = document.getElementById('improvementItems');
            addImprovementBtn.addEventListener('click', async function() {
                const area = document.getElementById('improvementArea').value;
                const priority = document.getElementById('improvementPriority').value;
                const goal = document.getElementById('improvementGoal').value;
                const actions = document.getElementById('improvementActions').value;
                const startDate = document.getElementById('improvementStartDate').value;
                const endDate = document.getElementById('improvementEndDate').value;

                if (!area || !priority || !goal || !actions || !startDate || !endDate) {
                    showToast('يرجى ملء جميع الحقول');
                    return;
                }

                const improvementData = {
                    area, priority, goal, actions, startDate, endDate, createdAt: new Date().toISOString()
                };

                if (window.FirebaseService) {
                    const result = await window.FirebaseService.saveData('improvement', improvementData);
                    if (result.success) {
                        addImprovementItemToDOM(improvementData);
                        clearImprovementForm();
                        showToast('تمت إضافة خطة التحسين بنجاح!');
                    } else {
                        showToast('حدث خطأ أثناء الحفظ: ' + result.error);
                    }
                }
            });

            function addImprovementItemToDOM(data) {
                const item = document.createElement('div');
                item.className = 'improvement-item';
                const priorityClass = data.priority === 'عالية' ? 'priority-high' : data.priority === 'متوسطة' ? 'priority-medium' : 'priority-low';
                item.innerHTML = `
                    <div class="improvement-item-header">
                        <div class="improvement-area">${data.area}</div>
                        <div class="improvement-priority ${priorityClass}">${data.priority}</div>
                    </div>
                    <p><strong>الهدف:</strong> ${data.goal}</p>
                    <p><strong>الإجراءات:</strong> ${data.actions}</p>
                    <p><strong>الفترة:</strong> من ${formatDate(data.startDate)} إلى ${formatDate(data.endDate)}</p>
                    <button class="remove-improvement-btn btn" style="margin-top: 10px; background-color: #f44336;">
                        <i class="fas fa-trash"></i> حذف
                    </button>
                `;
                improvementItems.appendChild(item);
                item.querySelector('.remove-improvement-btn').addEventListener('click', () => item.remove());
            }

            function clearImprovementForm() {
                document.getElementById('improvementArea').value = '';
                document.getElementById('improvementPriority').value = '';
                document.getElementById('improvementGoal').value = '';
                document.getElementById('improvementActions').value = '';
                document.getElementById('improvementStartDate').value = '';
                document.getElementById('improvementEndDate').value = '';
            }

            function formatDate(dateString) {
                return new Date(dateString).toLocaleDateString('ar-SA');
            }

            // Preview images
            document.querySelectorAll('.evidence-preview, .certificate-preview, #licensePreview').forEach(preview => {
                preview.addEventListener('click', function() {
                    if (this.style.display === 'block') {
                        showPreview(this.src, 'image');
                    }
                });
            });

            function showPreview(src, type) {
                const modal = document.getElementById('previewModal');
                const container = document.getElementById('previewContainer');
                modal.style.display = 'flex';
                container.innerHTML = type === 'image' ? `<img src="${src}" alt="Preview">` : `<iframe src="${src}"></iframe>`;
            }

            document.getElementById('closePreview').addEventListener('click', () => {
                document.getElementById('previewModal').style.display = 'none';
            });

            window.addEventListener('click', (e) => {
                if (e.target === document.getElementById('previewModal')) {
                    document.getElementById('previewModal').style.display = 'none';
                }
            });
        });
    </script>
</body>
</html>
